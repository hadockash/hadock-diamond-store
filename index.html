<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Free Fire Top-Up</title>
  <style>
    :root{
      --bg:#0f172a; --card:#111827; --muted:#6b7280; --accent:#22d3ee; --accent-2:#60a5fa; --text:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Helvetica,Arial,sans-serif;background:linear-gradient(160deg,#0b1224,#0f172a 40%,#0b1020);color:var(--text)}
    .wrap{max-width:1000px;margin:24px auto;padding:16px}
    .header{display:flex;align-items:center;gap:12px;margin-bottom:10px}
    .header h1{font-size:20px;margin:0}
    .step{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px 16px;margin:14px 0}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:560px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;overflow:hidden;transition:.2s ease;display:flex;flex-direction:column}
    .card:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.14)}
    .card.selected{outline:2px solid var(--accent);box-shadow:0 0 0 4px rgba(34,211,238,.15)}
    .thumb{aspect-ratio:16/9;background:linear-gradient(135deg,rgba(96,165,250,.25),rgba(34,211,238,.25));display:flex;align-items:center;justify-content:center}
    .thumb img{max-width:86%;max-height:86%;filter:drop-shadow(0 8px 14px rgba(0,0,0,.35))}
    .body{padding:12px 12px 6px}
    .title{font-weight:700;line-height:1.2}
    .price{color:#93c5fd;font-weight:700;margin-top:4px}
    .qty{display:flex;align-items:center;gap:8px;margin:10px 0 12px}
    .qty button{width:34px;height:34px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0b1224;color:var(--text);font-size:18px;cursor:pointer}
    .qty input{width:60px;text-align:center;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0b1224;color:var(--text);padding:8px}
    .foot{padding:10px 12px 14px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.06)}
    .choose{cursor:pointer;font-size:13px;color:#a5b4fc;text-decoration:underline}
    .order{display:flex;flex-direction:column;gap:12px}
    .summary{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;background:rgba(255,255,255,.04);border:1px dashed rgba(255,255,255,.14);border-radius:12px;padding:12px}
    .summary .line{display:flex;gap:8px;align-items:center}
    .btn{appearance:none;border:0;border-radius:14px;padding:14px 18px;font-weight:700;cursor:pointer}
    .btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#00111a;box-shadow:0 10px 30px rgba(34,211,238,.25)}
    .btn-primary:disabled{opacity:.6;cursor:not-allowed;box-shadow:none}
    .muted{color:var(--muted)}
    .uploader{display:none;flex-direction:column;gap:10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px}
    .uploader input[type=file]{padding:12px;border:1px dashed rgba(255,255,255,.25);border-radius:12px;background:#0b1224;color:var(--text)}
    .preview{max-width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.08)}
    .tip{font-size:12px;color:#9ca3af}
    .badge{background:rgba(96,165,250,.18);border:1px solid rgba(96,165,250,.35);color:#cfe4ff;padding:2px 8px;border-radius:999px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <img src="https://via.placeholder.com/28x28?text=FF" width="28" height="28" alt="">
      <h1>Step 2: Select Diamond Packages</h1>
      <span class="badge">Demo UI</span>
    </div>

    <div id="productGrid" class="grid"></div>

    <div class="step order">
      <h2 style="margin:0;font-size:18px">Step 3: Your Order</h2>

      <div class="summary">
        <div class="line"><strong>Selected:</strong> <span id="summaryItem" class="muted">—</span></div>
        <div class="line"><strong>Total:</strong> <span id="summaryTotal">0 LKR</span></div>
      </div>

      <button id="orderBtn" class="btn btn-primary" disabled>Request Order</button>

      <div id="uploader" class="uploader">
        <strong>Upload Receipt</strong>
        <input id="receipt" type="file" accept="image/*,.pdf" />
        <img id="preview" class="preview" style="display:none" alt="receipt preview"/>
        <div class="tip">
          WhatsApp window එක open වෙනකොට ඉතින් මෙහි upload කරන ලද receipt file එක WhatsApp chat එකට attach කරලා යවන්න.
        </div>
      </div>
    </div>
  </div>

  <script>
    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    // EDIT THIS: put your WhatsApp number here (no +, include country code)
    const WHATSAPP_NUMBER = "94XXXXXXXXX";
    // <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

    // Product list (edit as needed)
    const products = [
      { id:1, name:"Weekly Lite Membership", price:120, img:"https://via.placeholder.com/420x240?text=Weekly+Lite" },
      { id:2, name:"Weekly Membership", price:460, img:"https://via.placeholder.com/420x240?text=Weekly" },
      { id:3, name:"Monthly Membership", price:2300, img:"https://via.placeholder.com/420x240?text=Monthly" },
      { id:4, name:"3DAY EVO Access", price:165, img:"https://via.placeholder.com/420x240?text=3D+EVO" },
      { id:5, name:"7DAY EVO Access", price:250, img:"https://via.placeholder.com/420x240?text=7D+EVO" },
      { id:6, name:"30DAY EVO Access", price:750, img:"https://via.placeholder.com/420x240?text=30D+EVO" },
      { id:7, name:"25 Diamonds", price:70, img:"https://via.placeholder.com/420x240?text=25+D" },
      { id:8, name:"100 Diamonds", price:270, img:"https://via.placeholder.com/420x240?text=100+D" },
      { id:9, name:"310 Diamonds", price:820, img:"https://via.placeholder.com/420x240?text=310+D" },
      { id:10, name:"520 Diamonds", price:1360, img:"https://via.placeholder.com/420x240?text=520+D" },
      { id:11, name:"1,060 Diamonds", price:2680, img:"https://via.placeholder.com/420x240?text=1060+D" },
      { id:12, name:"2,180 Diamonds", price:5400, img:"https://via.placeholder.com/420x240?text=2180+D" },
      { id:13, name:"5,600 Diamonds", price:13400, img:"https://via.placeholder.com/420x240?text=5600+D" },
      { id:14, name:"11,500 Diamonds", price:27550, img:"https://via.placeholder.com/420x240?text=11500+D" }
    ];

    const grid = document.getElementById("productGrid");
    const orderBtn = document.getElementById("orderBtn");
    const summaryItem = document.getElementById("summaryItem");
    const summaryTotal = document.getElementById("summaryTotal");
    const uploader = document.getElementById("uploader");
    const receiptInput = document.getElementById("receipt");
    const preview = document.getElementById("preview");

    let selected = null;

    // Render cards
    products.forEach(p => {
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.id = p.id;

      card.innerHTML = `
        <div class="thumb"><img alt="" src="${p.img}"></div>
        <div class="body">
          <div class="title">${p.name}</div>
          <div class="price">${p.price.toLocaleString()} LKR</div>
          <div class="qty">
            <button class="minus" aria-label="decrease">−</button>
            <input class="q" type="number" min="0" value="0" />
            <button class="plus" aria-label="increase">+</button>
          </div>
        </div>
        <div class="foot">
          <span class="muted">Tap to select</span>
          <span class="choose">Select</span>
        </div>
      `;

      // Quantity handlers
      const qInput = card.querySelector(".q");
      card.querySelector(".minus").addEventListener("click", e => {
        e.stopPropagation();
        qInput.value = Math.max(0, Number(qInput.value) - 1);
        reflectSelection(card, p, Number(qInput.value));
      });
      card.querySelector(".plus").addEventListener("click", e => {
        e.stopPropagation();
        qInput.value = Number(qInput.value) + 1;
        reflectSelection(card, p, Number(qInput.value));
      });

      // Select by clicking the card or "Select"
      card.addEventListener("click", () => {
        // if qty is zero, set to 1 on first select
        if (Number(qInput.value) === 0) qInput.value = 1;
        reflectSelection(card, p, Number(qInput.value), true);
      });
      card.querySelector(".choose").addEventListener("click", e => {
        e.stopPropagation();
        if (Number(qInput.value) === 0) qInput.value = 1;
        reflectSelection(card, p, Number(qInput.value), true);
      });

      grid.appendChild(card);
    });

    function reflectSelection(card, product, qty, forceSelect=false){
      // make this the only selected card if we’re selecting
      if (forceSelect || card.classList.contains("selected")){
        document.querySelectorAll(".card.selected").forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");
        selected = { ...product, qty };
      } else {
        // only quantity changed but not selected yet
        selected = { ...product, qty };
      }
      updateSummary();
    }

    function updateSummary(){
      if (!selected || selected.qty<=0){
        summaryItem.textContent = "—";
        summaryTotal.textContent = "0 LKR";
        orderBtn.disabled = true;
        uploader.style.display = "none";
        return;
      }
      const total = selected.price * selected.qty;
      summaryItem.textContent = `${selected.name} × ${selected.qty}`;
      summaryTotal.textContent = `${total.toLocaleString()} LKR`;
      orderBtn.disabled = false;
    }

    // WhatsApp + Receipt flow
    orderBtn.addEventListener("click", () => {
      if (!selected || selected.qty<=0) return;

      const total = (selected.price * selected.qty).toLocaleString();
      const msg =
`🔰 Free Fire Top-Up Request
• Package: ${selected.name}
• Quantity: ${selected.qty}
• Total: ${total} LKR

Please confirm.`;

      const url = `https://wa.me/${encodeURIComponent(WHATSAPP_NUMBER)}?text=${encodeURIComponent(msg)}`;
      window.open(url, "_blank"); // open WhatsApp chat

      // Show receipt uploader
      uploader.style.display = "flex";
      uploader.scrollIntoView({behavior:"smooth",block:"center"});
    });

    // Simple preview for images/PDF
    receiptInput.addEventListener("change", (e) => {
      const f = e.target.files && e.target.files[0];
      if (!f){ preview.style.display="none"; return; }
      const url = URL.createObjectURL(f);
      if (f.type.startsWith("image/")){
        preview.src = url;
        preview.style.display = "block";
      } else {
        preview.style.display = "none";
        alert("PDF/Other file selected. WhatsApp chat එකට attach කරලා යවන්න.");
      }
    });
  </script>
</body>
  </html>
